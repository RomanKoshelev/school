IMPLEMENT_SYSTEM_OBJECTS;										// Указатели на основные глобальные объекты
//================================================================================================[] 


SingleObject	* pSingleObject = NULL;						// Главный объект проекта
SET_TIMER_HANDLER (pSingleObject->OnTimer);				// Установка функции-обработчика секундного таймера.


//______________________________________________________________________________
//                                                                            []
//` Main                                                                      []    
//                                                                            []
int main (int argc, char *argv[])
{
	DEBUG_STACK_NAME(main);
	int	nRetVal=0;												// Значение, возвращаемое int main(...)
	
	CHECK_START_STOP;												// Обработка запроса на запуск/останов базы.
	CREATE_SYSTEM_OBJECTS;										// Создание основных системных объектов.
	SERVER_DEBUG_TEXT ("main: приступила к работе.");	// Протоколирование начала работы.

/*----------------------------------------------------------------------------[]
[]																										[]
[]  Главный цикл																					[]
[]																										*/
	pSingleObject = new SingleObject;						// Создание главного объекта
	if (pSingleObject->Create (argc, argv))				// проекта.
	{
		#ifndef WIN32
			nRetVal = OBServer_MainLoop (); 					// Вызов основной функции сервера
			SERVER_DEBUG_VALUE(nRetVal);						// Протоколирование результата
		#else
			(void)argc; (void)argv;	RunTest ();				// Запустить тест
		#endif
	}
	else
	{
		SERVER_DEBUG_ERROR ("Не удалось корректно создать главный объект проекта");
	}

	delete	pSingleObject;										// Уничтожение главного объекта
	pSingleObject	= NULL;										// проекта.
/*																										[]
[]																										[]
[]----------------------------------------------------------------------------*/

	SERVER_DEBUG_TEXT ("main: закончила работу.");		// Протоколирование окончания работы.

	puts ("\n\nSHUT DOWN... \n\nWAIT...\n\n");

	DELETE_SYSTEM_OBJECTS;										// Удаление основных системных объектов

	return nRetVal;
}
//================================================================================================[] 




/*______________________________________________________________________________
[]                                                                            []
[]                                                                            []
[] END OF FILE                                                                []
[]                                                                            []
[]____________________________________________________________________________[]
*/

